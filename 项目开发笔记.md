## 项目目录
|-- jobs-chat
    |-- 省略
    |-- src
        |-- config.js
        |-- component
        |   |-- logo
            |   |-- job.png
            |   |-- logo.css
            |   |-- logo.js
        |-- container
        |   |-- login // 登录
        |   |-- register // 注册
        |-- index.js
        |-- reducer.js
        |-- redux
## 登录注册
* cookie保存登录状态
```js
// 后端服务
// jobs-chat/server/user.js
// 用户登录
Router.post('/login', function(req, res){
  // ...
  User.findOne({user, pwd: md5Pwd(pwd)},{'pwd': 0},function(err,doc){
    // ...
    // 添加cookie
    res.cookie('userid', doc.id)
    return res.json({code:0, data: doc})
  })
})

// 根据cookie判断显示
Router.get('/info',function(req,res){
  // 用户有没有cookie
  return res.json({code:1})
})
// 修改为
Router.get('/info',function(req,res){
  // 用户有没有cookie
  const {userid} = req.cookies
  if(!userid) {
    return res.json({code:1})
  }
  User.findOne({_id:userid}, _filter, function(err,doc) {
    if(err) {
      return res.json({code: 1, msg: '服务出错'})
    }
    if(doc) {
      return res.json({code: 0, data: doc})
    }
  })
})

// =============================
// redux用户信息存储
// user.redux.js
const LOAD_DATA = 'LOAD_DATA'

export function user(state = initState, action) {
  switch(action.type){
    // ...
    case LOAD_DATA:
      return {...state, ...action.payload}
    // ...
  }
}

// =============================
// authroute.js
import { loadData } from '../../redux/user.redux'
import { connect } from 'react-redux'

@withRouter
@connect(
  null,
  { loadData }
)

// ...
axios.get('/user/info')
.then(res=>{
  if(res.status === 200) {
    if(res.data.code === 0) {
      // 有登录的信息
      this.props.loadData(res.data.data)
    } else {
      // ...
    }
  }
})

// =============================
// user.redux.js
// 加载数据
const LOAD_DATA = 'LOAD_DATA'

export function loadData(userinfo) {
  return {type: LOAD_DATA, payload: userinfo}
}

// =============================
// user.js
// 修改用户注册部分
const userModel = new User({user,type,pwd:md5Pwd(pwd)})
userModel.save(function(e,d) {
  if(e) {
    return res.json({
      code: 1,
      msg: '网络问题'
    })
  }
  const {user,type,_id} = d
  res.cookie('userid',_id)
  return res.json({code:0,data:{user,type,_id}})
})
```
